\subsection{Services vs. Components}
\subsection{Microservices vs. Services}

\subsection{(German Slides on Microservices)}

\begin{frame}{(Micro-)Services}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mydefinition{(Micro-)Service}{
			\mycite{[A (micro-)service is a module] implemented and operated as a small yet independent system, offering access to its internal logic and data through a well-defined network interface.}
				{Jamshidi et al., 2018}
		}
		\mydefinition{(Micro-)Service Architecture}{
			\mycite{A [micro]service is a cohesive, independent process interacting via messages. 
				A microservice architecture [service-oriented architecture] is a distributed application where all its modules are microservices.}
				{Dragoni et al., 2017}
		}	
	\mynextcolumn		
		\pic[width=\linewidth]{peer-to-peer}
	\end{mycolumns}
\end{frame}

\begin{frame}{Services vs.\ Components}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mydefinition{Component}{
			Intra-process communication (i.e., method calls)
			\begin{center}
				\pic[width=0.65\linewidth]{component_vs_service_1}
			\end{center}			
		}
	\mynextcolumn		
		\mydefinition{Service}{
			Inter-process communication (e.g., REST API)
			\begin{center}
				\pic[width=0.65\linewidth]{component_vs_service_2}
			\end{center}	
		}
	\end{mycolumns}
	~
	\mynote{}{
		As a consequence, each (micro-)service can be implemented using different technology stacks, whereas components are bound to the same technology (given by container or middleware).
	}
\end{frame}

\begin{frame}{Microservice Architecture: Motivation}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mynote{Remember: The Library Scaling Problem}{
			TODO			
		}
	\mynextcolumn		
		\mynote{How small is a Microservice?}{
			\begin{itemize}
				\item Components are very unspecific of how to deal with the general requirement ``not too small but not too big''.
				\item On the contrary, there is a clear philosophy behind microservice architectures, largely driven by organizational constraints wrt.\ agile teams and continuous delivery
			\end{itemize}
		}
		\mydefinition{}{
			\mycite{If the codebase is too big to be \emph{managed by a small team}, looking to break it down is very sensible. [...] The smaller the service, the more you \emph{maximize the benefits and downsides} of microservice architecture.}{Sam Newman, 2015}% [...] The golden rule: can you make a change to a service and deploy it by itself without changing anything else?
		}		
	\end{mycolumns}
\end{frame}

\begin{frame}{Microservice Architecture: Philosophy and Principles}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mydefinition{Conway's Law}{
			\mycite{Organizations which design systems [...] are constrained to produce designs which are copies of the communication structures of these organizations.}{\href{https://www.melconway.com/Home/pdf/committees.pdf}{Melvin Edward Conway, 1968}}			
		}
		\mydefinition{Single Responsibility Principle}{
			\mycite{Gather together the things that change for the same reasons. Separate those things that change for different reasons.}{\href{https://blog.cleancoder.com/uncle-bob/2014/05/08/SingleReponsibilityPrinciple.html}{Robert C. Martin, 2014}}			
		}
		\mydefinition{}{
			\mycite{You build it, you run it.}{Amazon CTO Werner Vogel, 2006}			
		}				
	\mynextcolumn		
		\mynote{Consequences}{
			\begin{itemize}
				\item Microservices are supposed to be split along business capabilities (e.g., TODO) instead of technical concerns (e.g., TODO)
				\item Each microservice is built (full stack) {\em and} operated by a small agile team that takes over full responsibility (cf. DevOps) 
			\end{itemize}
		}
		\mydefinition{}{
			\mycite{[A microservice] could be re-written in two weeks.}{\href{https://www.rea-group.com/blog/micro-services-what-even-are-they/}{Jon Eaves, 2014}}
		}
		\mydefinition{}{
			\mycite{Every team should be small enough that it can be fed with two pizzas.}{\href{https://www.theguardian.com/technology/2018/apr/24/the-two-pizza-rule-and-the-secret-of-amazons-success}{Jeff Bezos, 2018}}
		}
	\end{mycolumns}
\end{frame}

\begin{frame}{Beispiel: Microservices bei Netflix}
	\large\bigskip\bigskip\bigskip\bigskip\bigskip
	\begin{center}
		\begin{tabular}{rl}
			100s & of microservices\\
			1,000s & of daily production changes\\
			10,000s & of instances\\
			100,000s & of customer interactions per minute\\
			1,000,000s & of customers\\
			%1,000,000,000s & of metrics\\
			10,000,000,000\phantom{s} & hours streamed\\
			10s & of operations engineers
		\end{tabular}
	\end{center}
	
	\bigskip\bigskip\bigskip\bigskip\hfill\tiny Quelle: \href{https://fr.slideshare.net/AmazonWebServices/dvo203-the-life-of-a-netflix-engineer-using-37-of-the-internet}{https://fr.slideshare.net/AmazonWebServices/dvo203-the-life-of-a-netflix-engineer-using-37-of-the-internet}
\end{frame}

\begin{frame}{Vorteile von Microservices}
	\begin{itemize}
		\item Heterogenität: einfache Anwendung von neuen Technologien/Programmiersprachen
		\item Continuous Integration/Deployment: bei Änderungen müssen nur einzelne Microservices ausgeliefert oder bei Fehlfunktionen zurückgesetzt werden (Rollback)
		\item Skalierbarkeit: Anzahl von Instanzen wählbar nach Rechenaufwand pro Microservice
		\pause
		\item Effizienz und Performance: Konfiguration von Ausführungsumgebung kann pro Microservice optimiert werden
		\item Wiederverwendung: Microservices können in beliebig vielen anderen Microservices verwendet werden
		\item Modernisierung: Ersetzung oder Entfernung einfacher möglich
	\end{itemize}
\end{frame}

\begin{frame}{Nachteile von Microservices}
	\begin{itemize}
		\item Latenz im Netzwerk größer als die von gemeinsam genutztem Arbeitsspeicher
		\item Netzwerksecurity erfordert Mehraufwand für Verschlüsselung und Authentifizierung
		\item Integrationstest kann sehr aufwändig werden
		\pause
		\item Verschieben von Code kann neue Programmiersprache erfordern
		\item Änderungen an Teams schwierig durch Heterogenität
		\item Ggfs. zu viele Microservices
		\item Datenkonsistenz schwierig herzustellen wenn mehrere Microservices verändert werden
	\end{itemize}
\end{frame}

\begin{frame}{Vergleich mit Serviceorientierten Architekturen}
	\begin{columns}[t]
		\column{.35\linewidth}
		Gemeinsamkeiten
		\begin{itemize}
			\item Services werden im Betriebsystem als eigenständige Prozess angesehen
			\item Kommunikation über Netzwerke
		\end{itemize}
		\column{.55\linewidth}
		Unterschiede
		\begin{itemize}
			\item Microservices sind ein spezifischer Ansatz für SOA
			\item Microservices sind meist kleiner als Services (feingranulares SOA)
			\item Orchestrierung: SOA vernetzt sich über zentralen Service
			\item Choreographie: Microservices kommunizieren durch Publish-Subscribe-Prinzip
		\end{itemize}
	\end{columns}
\end{frame}

\begin{frame}{Vergleich mit Komponenten/Bibliotheken/Plugins}
	\begin{columns}[t]
		\column{.35\linewidth}
		Gemeinsamkeiten
		\begin{itemize}
			\item Modularisierung
			\item Wiederverwendung
		\end{itemize}
		\column{.55\linewidth}
		Unterschiede
		\begin{itemize}
			\item Microservices unterstützen Heterogenität (z.B. verschiedene Programmiersprachen)
			\item Microservices haben keinen gemeinsamen Arbeitsspeicher
			\item Update von Microservices erfordert keinen Neustart der Gesamtapplikation
		\end{itemize}
	\end{columns}
\end{frame}

\begin{frame}{Traditional Promises of Microservices}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mynote{}{
			\begin{itemize}
				\item \emph{Scalability}: Microservices are small enough to be developed by a small, agile team. %(cf. typical size of a Scrum team).
				\item \emph{Continuous integration/deployment}: Microservices can be deployed independently of each other. %(i.e., each microservice has its own CI/CD pipeline).
				\item \emph{Heterogeneity}: Each microservice can be implemented using its own technology stack. %(team preferences, adoption of new technologies, etc.).
				\item \emph{Fault tolerance}: The crash of a single microservice should not lead to a crash of the entire system. %(cf. design for failure).
				\item \emph{Efficiency}: Configuration of execution environment can be optimized per microservice.
				\item \emph{Modernization}: A microservice can be easily replaced by an alternative one (even re-implemented from scratch).
			\end{itemize}
		}
	\mynextcolumn
		\myexampletight{The Microservice ``Hype''}{
			\pic[width=\linewidth]{microservices}\\
			\vspace{0.3cm}
			\pic[width=\linewidth]{microservices-comparison}
		}
	\end{mycolumns}	
\end{frame}

\begin{frame}{Service-Oriented Implementation of Software Product Lines}
	\begin{mycolumns}[widths={40,60},animation=none]
		\myexample{Recap: Component-Based Implementation}{
			\includegraphics[width=.24\linewidth,height=1.0cm]{lego_components} 
				\vspace*{\fill}
					$+$ 
				\vspace*{\fill}	
			\includegraphics[width=.24\linewidth,height=1.0cm]{lego_glue}
				\vspace*{\fill}
					$=$ 
				\vspace*{\fill}	
			\includegraphics[width=.3\linewidth,height=1.0cm]{lego_product}
		}		
		\myexample{Plenty of Glue Code}{
			\centering
			\includegraphics[width=.65\linewidth,height=2.5cm]{lego_glue}				
		}				
	\mynextcolumn
		\mydefinition{Same Idea}{
			\begin{itemize}
				\item Features are implemented as services.
				\item Feature selection determines the services to be composed.
			\end{itemize}
		}	
		\mynote{However}{
			``Standardized'' service composition instead of highly individual glue code.
		}	
		\myexample{}{
			\includegraphics[width=.27\linewidth,height=1.75cm]{lego_components} 
				\vspace*{\fill}
					$+$ 
				\vspace*{\fill}	
			\includegraphics[width=.27\linewidth,height=1.75cm]{lego_orchestration}
				\vspace*{\fill}
					$=$ 
				\vspace*{\fill}	
			\includegraphics[width=.35\linewidth,height=1.75cm]{lego_product}
		}	
	\end{mycolumns}	
\end{frame}

\begin{frame}{Service ``Composition''}
	\begin{mycolumns}[widths={50,50},animation=none]
		\mydefinition{Orchestration}{
			Description of an executable (business-)process as a combination of services (centralized perspective, e.g., using WS-BPEL).
		}
		\myexampletight{}{
			\pic[width=\linewidth]{trafficlights}
		}
	\mynextcolumn
		\mydefinition{Choreography}{
			Each service describes its own task within a service composition (decentralized perspective, e.g, using WS-CDL).
		}
		\myexampletight{}{
			\pic[width=\linewidth]{crossroad}
		}
	\end{mycolumns}	
\end{frame}