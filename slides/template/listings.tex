\usepackage{listings}
\usepackage[normalem]{ulem}
\tcbuselibrary{listings}

\newcommand{\definelanguage}[2]{
	\lstdefinelanguage{#1}{#2}
	\lstnewenvironment{#1}[1][]{\lstset{language=#1,##1}}{}
	\newtcblisting{#1tight}[2][]{uulm@tightboxstyle={top=-6pt,bottom=-6pt}{##2}{blue},listing only,listing options={language=#1,##1}}
}

% listing style inherited by all languages
\lstset{
	numbers=none, % where to put the line-numbers
	showspaces=false, % show spaces with underscores
	showstringspaces=false, % underline spaces within strings
	showtabs=false, % show tabs within strings with underscores
	tabsize=2, % sets default tabsize to 2 spaces
	breaklines=true, % sets automatic line breaking
	breakatwhitespace=false,
	columns=fullflexible,
	commentstyle=\color{green},
	keywordstyle=\color{blue},
	stringstyle=\color{red},
}

% language-specific styles
\definelanguage{code}{
	moredelim=**[is][\color{red}]{@}{@},
	moredelim=**[is][\color{green}]{?}{?},
	moredelim=**[is][\color{blue}]{~}{~},
	moredelim=[is][\sout]{|}{|},
}

\definelanguage{uvl}{
	alsoletter={=, >, |},
	morekeywords={features, constraints, namespace, mandatory, optional, or, alternative, abstract, =>, |}
}

\definelanguage{dimacs}{
	alsoletter={0},
	morekeywords={p, cnf, 0},
	morecomment=[f]{c},
}

\definelanguage{kconfig}{
	keepspaces=true,
	morekeywords={config, bool, default, if, help, def_bool, depends, on, select},
	morecomment=[f]{\#},
	morestring=*[d]{"},
	literate={-}{{-}}1,
}